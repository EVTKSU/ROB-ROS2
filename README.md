# ROB-ROS2

ROS 2 workspace for EVT's MINI-ROB autonomous vehicle project.

---

## Table of Contents

- [First-Time Setup](#first-time-setup)
- [Docker](#docker)
- [ROS 2 Workspace Structure](#ros-2-workspace-structure)
- [Strict Folder Requirements](#strict-folder-requirements)
- [Creating a New Python Package](#creating-a-new-python-package)
- [Building and Sourcing the Workspace](#building-and-sourcing-the-workspace)
- [Running a Demo Package](#running-a-demo-package)
- [Version Control and Ignoring Build Artifacts](#version-control-and-ignoring-build-artifacts)
- [Best Practices](#best-practices)

---

## First-Time Setup

For new developers setting up the workspace:

1. Clone the repository:

```bash
git clone https://github.com/YOUR_TEAM/ROB-ROS2.git
cd ROB-ROS2
```

2. Install ROS 2 Jazzy (if not already installed). Follow the official instructions:
   https://docs.ros.org/en/jazzy/Installation.html

3. Source ROS 2 before building:

```bash
source /opt/ros/jazzy/setup.bash
```

4. Build the workspace:

```bash
colcon build
```

5. Source the overlay:

```bash
source install/setup.bash
```

You are now ready to run nodes or launch files.

---

## Docker

> Note: The Docker image may not work for certain (newer) Apple devices due to the Ubuntu install filetype.

### Build the Docker Image

1. Ensure Docker Engine is running in Docker Desktop.
2. Open a terminal, navigate to the directory containing your Dockerfile (`ROS2_Docker/`), and run:

```bash
docker build -t ros2_image .
```

### Run the Docker Container

```bash
docker run -it ros2_image
```

This creates a Docker image based on Ubuntu, installs ROS 2 dependencies, and runs your ROS 2 installer script inside the container.

Use `exit` to leave the container.

---

## ROS 2 Workspace Structure

This repository uses the standard `colcon` build system with the following layout:

```
ROB-ROS2/
├── src/
│   ├── pub_sub_demo/          # Minimal pub/sub demo (launchable)
│   ├── system_msgs/           # Shared custom message definitions
│   └── ...                    # Future ROS packages
├── ROS2_Docker/               # Docker setup and install scripts
│   ├── Dockerfile
│   ├── instructions.md
│   └── your_ros2_installer.sh
├── .gitignore
├── README.md
└── colcon.meta                # Optional colcon config
```

---

## Strict Folder Requirements

ROS 2 workspaces have strict structure rules:

1. All ROS 2 packages **must be in `src/`**.
2. Each package must include:
   - `package.xml`
   - `setup.py` (for Python) or `CMakeLists.txt` (for C++)
3. You must build from the root (above `src/`) using `colcon build`.

Failing to follow this structure may cause packages to be skipped or not recognized.

---

## Creating a New Python Package

To create a new ROS 2 Python package:

```bash
cd src
ros2 pkg create --build-type ament_python your_new_package
```

Typical structure:

```
your_new_package/
├── package.xml
├── setup.py
├── setup.cfg
├── resource/
│   └── your_new_package
├── your_new_package/
│   └── your_node.py
├── launch/
│   └── your_launch_file.launch.py
```

---

## Building and Sourcing the Workspace

From the root of `ROB-ROS2/`:

```bash
source /opt/ros/jazzy/setup.bash
colcon build
source install/setup.bash
```

To test communication:

```bash
ros2 topic list
ros2 topic echo /your_topic
```

---

## Running a Demo Package

This workspace includes a demo ROS 2 package: `pub_sub_demo`.

It shows how to create:
- A publisher node (`talker.py`)
- A subscriber node (`listener.py`)
- A launch file (`pub_sub_demo.launch.py`)

### Run the demo:

```bash
source /opt/ros/jazzy/setup.bash
source install/setup.bash
ros2 launch pub_sub_demo pub_sub_demo.launch.py
```

Both the talker and listener will start. The talker publishes to `/chatter`, and the listener logs the incoming messages.

This package is intended to serve as a **template** for future development.

---

## Version Control and Ignoring Build Artifacts

The following folders are automatically generated by `colcon build`:

- `build/`
- `install/`
- `log/`

These are excluded via `.gitignore` and should **not** be committed.

To clean and rebuild the workspace:

```bash
rm -rf build/ install/ log/
colcon build
```

---

## Best Practices

- Keep all ROS 2 packages inside `src/`.
- Use `ros2 pkg create` to generate clean package scaffolds.
- Include a `README.md` in each package to explain its purpose.
- Do not track `build/`, `install/`, or `log/` in Git.
- Do not source `install/setup.bash` in `.bashrc`; source it manually in each terminal.
- Use launch files for multi-node coordination and testing.

---
